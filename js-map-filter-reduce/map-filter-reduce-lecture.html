

<!DOCTYPE html>
<html lang="en">
    <head>
    <meta charset="UTF-8">
    <title>Functional Methods</title>
</head>
<body>

<h1>Functional Methods</h1>

<h2>My Cats Names </h2>
<ul id="myCats"></ul>


<div>
    <h2>Short Cat Names</h2>
    <ul id="shortNamesCats"></ul>
</div>


<script>
    // "use strict";

    // Hey Everyone, so today gonna be covering the map, filter, and reduce methods!
    // TODO: Go to the Powerpoint

    // Map will allow us to make a copy of an array where each element of an array is changed with a callback method.
    
    // TODO: WHAT ABOUT FOR EACH?
    //const doubleUsingForEach = favoriteNumbers.forEach((item) => item*2) NO!
    const favoriteNumbers = [11,17,15,12,100,7,1,3,9];

    // FOR EACH EXAMPLE:
    const forEachExample = [];
    favoriteNumbers.forEach((item,index,array) => {
        forEachExample.push(array[index]*2)
    })

    console.log('forEachExample',forEachExample)

    const forOfExample = [];
    for(const number of favoriteNumbers) forOfExample.push(number*2)

    console.log("forOfExample",forOfExample)

    // This syntax is longer and requires more lines of code to accomplish the same thing
    // But remember, there are multiple ways to solve all problems.




    //TODO: MAP Exercise #1
    const doubleOriginalArray = favoriteNumbers.map((number) => number * 2);

    console.log("mapExample#1",doubleOriginalArray);





    //TODO: Map Exercise #2


    // Alright here is a new array of cats!
    const myCats = ['Little One',"Mao Mao", "Lizzy"]

    // Ok so I have this array of cats here and I'd like to make all the cats uppercase

    //TODO: Ask: How would I do that using MAP?

    const bigCats = myCats.map((cat) => cat.toUpperCase())

    console.log(bigCats)


    // OK! Well I would like to use the MAP function to modify the big cats array we just created and display that too the screen
    // so first lets create a UL in the page, that is emnty and has an id of myCats


    const mapCatToLI = (cat) => `<li>${cat}</li>`

    //TODO:  Map Exercise #3
    const bigCatsHTML = bigCats.map(mapCatToLI)

    //What do you you think the resulting array is going to look like?

    console.log('bigCatsHTML',bigCatsHTML);

    document.getElementById("myCats").innerHTML = bigCatsHTML.join("");


    //TODO:  Map Exercise #5


    // This is an array of TV shows. Each TV show is an object of the array.
    const arrayOfTVShows = [
        {
            title: "The Office",
            seasons: 9,
            imdbScore: 9,
            firstEpisodeYear: 2005,
            characters: ["Micheal","Pam","Jim","Andy"]
        },
        {
            title: "Game of Thrones",
            seasons: 8,
            imdbScore: 9.3,
            firstEpisodeYear: 2011,
            characters: ["Jon","Arya","Sansa","Tyrion"]
        },
        {
            title: "The Good Place",
            seasons: 4,
            imdbScore: 8.2,
            firstEpisodeYear: 2016,
            characters: ["Janet","Chidi","Elenor","Jason","Tahani"]
        },
        {
            title: "Breaking Bad",
            seasons: 5,
            imdbScore: 9.5,
            firstEpisodeYear: 2008,
            characters: ["Walter","Jesse","Skylar"]
        },

    ]

    // We can use map a new field based on data that we have on each item.
    // Lets say that our app requires several of these fields as a string, we want to combine them so that we can access
    // them later!

    const mapNewFieldToArray = arrayOfTVShows.map((show) => {
        const { title, seasons, imdbScore} = show;
        return {
            ...show, // Object Destructing
            headline: `${title} (${seasons} seasons) has an average IMDB score of ${imdbScore}.`
        }
    })

    console.log(mapNewFieldToArray)


    // OK so now that we have an idea of how MAP can work and different usages lets move on to FILTER
    // Filter will allow us to make a copy of an array where only the elements that meet certain criteria are in the new copy.


    //TODO:PowerPoint Review for FILTER
    //TODO: Filter Exercise #1

    // Earlier we created an array favorite Numbers, lets use the filter method To get only the odd values.

    const oddFavorites = favoriteNumbers.filter((num) => num % 2) // or !== 0, but if number is over zero it returns TRUTHY.

    console.log(oddFavorites);


    //TODO: Filter Exercise #2
    const filterCatsUnder7Characters = (cat) => cat.length < 7
    const catsWithNamesUnder7Characters = myCats.filter((cat) => cat.length < 7); // TODO replace filter with filter above
    console.log(catsWithNamesUnder7Characters)

    // What if I wanted to add this to the page tho show the short name cats like we did before?

    // Lets go check the original example and do a little refactoring.
    // TODO: go to top and change the MAP to add mapCatToLI
    // We dont want to redefine the same filter twice?
    // That would be a bad coding practice :)


   // TODO:  const catHTML = catsWithNamesUnder7Characters.map(mapCatToLI)

    // Alternatively COMBINED!
    const catHTML = myCats
        .filter(filterCatsUnder7Characters)
        .map(mapCatToLI);

    console.log(catHTML)

    document.getElementById("shortNamesCats").innerHTML = catHTML.join("");

    //======
    // Reduce
    // ======

    // TODO: go to PowerPoint

    // Reduce allows us to take a collection and turn it into a single value.
    // Lets look at the favorite numbers array again.

    //TODO: Reduce Example #1

    const favoriteSum = favoriteNumbers.reduce((previousValue, currentValue) => previousValue + currentValue);

    //Here reduce is working by adding the values together until it has no more elements in the array and then it will return
    //a single element that REDUCES all the elements into 1.

    console.log(favoriteSum);

    //----------------------------

    // TODO: Reduce Example #2


    // Let's use the cats example:

    const fullCatsHTML = myCats
        .map(mapCatToLI) // We could add a filter in here to remove items as well!?
        .reduce((previousValue, currentValue) => previousValue + currentValue, "<ul>") + "</ul>";

    //TODO: ASK: What is the datatype of the element returned from the reduce above.
    //


    // <ul> = initial Value of reduce function
    // Initial previousValue = <ul>
    // Current Value is a single element from the MAPPED cats array
    // That array looks like <li>cat name </li>
    // Finally, after the reduce function is completed we are adding UL to the end to close the loop

    document.getElementsByTagName("body")[0].innerHTML += fullCatsHTML;


    //----------------------------

    //TODO Reduce Example #3  (using arrayOfTVShows)


    // SHAPE OF OBJECT
    // TV Shows report
    const initialValue = {
        totalTVShows: 0,
        avgIMDBScore: 0,
        startingYears: []
    };

    const tvShowsReport = arrayOfTVShows.reduce((previousValue, currentValue,index) => {

        let {startingYears, totalTVShows, avgIMDBScore } = previousValue;

        avgIMDBScore = (avgIMDBScore*index + currentValue.imdbScore) / (index+1);
        startingYears.push(currentValue.firstEpisodeYear)

        return {
            totalTVShows: totalTVShows + 1,
            avgIMDBScore,
            startingYears
        }
    },initialValue)


    console.log(tvShowsReport)

    </script>

    </body>
    </html>